# MODX REVOLUTION SHOPKEEPER 3.0 plugin

==============================
Инструкция по настройке модуля
==============================
Сначало установить модуль стандартным образом через админ панель. После этого:

1. Необходимо создать 2-3 страницы:

*   страница оплаты через Tranzzo. (или вставить [[!tranzzo? action=`payment`]] на странице уведомления о успешно сделанном заказе, тогда страницу можно не создавать)
    Вставить в поле "Содержимое ресурса" вызов сниппета:

    [[!tranzzo? action=`payment`]]

*   страница с сообщением об успешной оплате (с любым содержанием)
    Пример:

    Оплата заказа №[[+shk.id]] прошла успешно на сумму [[+shk.price]] [[+shk.currency]]


*   страница для подтверждения оплаты. Вставить в поле "Содержимое ресурса" вызов сниппета:

    [[!tranzzo? action=`callback`]]

    P.S. при работе модуля ShopKeeper3 используется сниппет Formit для валидации формы оплаты,
    в вызове сниппета можно добавить хук tranzzo перед redirect, что позволит автоматически
    сделать редирект на форму с оплатой. (Если вставить [[!tranzzo? action=`payment`]]  на странице уведомления о успешно сделанном заказе, то делать редирект не надо)

2. Заполнить параметры сниппета tranzzo:

page_paymentForm - id страницы формы оплаты

page_callback - id страницы приёма ответа сервера оплаты

page_result - id страницы для возврата на сайт

currency - Валюта магазина(3-х буквенный код валюты)


TRANZZO_POS_ID,
TRANZZO_API_KEY,
TRANZZO_API_SECRET,
TRANZZO_ENDPOINTS_KEY - получить у поставщика услуги


3. В меню ShopKeeper3 перейти в раздел настройки, выбрать "Методы оплаты". Вписать "Имя" - Tranzzo, "значение" - tranzzo.
Сохранить настройки, после чего в форме офомрления заказа появится в списке метод оплаты "Tranzzo"
